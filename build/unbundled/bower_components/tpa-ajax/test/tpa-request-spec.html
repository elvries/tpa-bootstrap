<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="description" content=""><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-capable" content="yes"><script src="../../webcomponentsjs/webcomponents.min.js"></script><script src="../../web-component-tester/browser.js"></script><link rel="import" href="../../polymer/polymer.html"><link rel="import" href="../../test-fixture/test-fixture.html"><link rel="import" href="../../iron-meta/iron-meta.html"><script src="../src/tpa-request.js"></script></head><body><script>describe("initial transaction load",function(){var e,t=sinon.sandbox.create();beforeEach(function(s){t.restore(),this.fakeXhr=t.useFakeXMLHttpRequest(),e=[],this.fakeXhr.onCreate=function(t){e.push(t)},flush(s)}),it("should make xhr request to provided url",function(){var e=new TPARequest,t="./somewhere";e.send({url:t}),expect(this.fakeXhr.requests[0].url).to.equal(t)}),it("should resolve promise with response data once response is returned",function(e){var t=new TPARequest,s="./somewhere";t.send({url:s}).then(function(t){var s=JSON.parse(t.response);expect(s.data).to.equal("this is data"),e()}),this.fakeXhr.requests[0].respond(200,{"Content-Type":"application/json"},'{ "data":"this is data"}')}),it("should throw when error return from request",function(e){var t=new TPARequest,s="./somewhere";t.send({url:s})["catch"](function(t){expect(!0).to.be["true"],e()}),this.fakeXhr.requests[0].respond(500)})});</script></body></html>