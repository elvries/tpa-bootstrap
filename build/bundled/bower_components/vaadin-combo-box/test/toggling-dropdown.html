<!DOCTYPE html><html><head><meta charset="UTF-8"><title>vaadin-combo basic tests</title><script src="../../web-component-tester/browser.js"></script><link rel="import" href="common.html"><script src="common.js"></script></head><body><test-fixture id="combobox"><template><vaadin-combo-box></vaadin-combo-box></template></test-fixture><script>var safari=navigator.userAgent.toLowerCase().indexOf("safari/")>-1&&-1==navigator.userAgent.toLowerCase().indexOf("chrome/");describe("toggling the dropdown",function(){function e(){Polymer.Base.fire("tap",{},{bubbles:!0,node:o.$$("paper-input-container #toggleIcon")})}var o;beforeEach(function(){o=fixture("combobox")}),describe("opening",function(){it("should open by tapping label",function(){Polymer.Base.fire("tap",{},{bubbles:!0,node:o.$$("paper-input-container label")}),expect(o.opened).to.be["true"]}),it("should open by clicking input",function(){o.$$("paper-input-container input").fire("tap"),expect(o.opened).to.be["true"]}),it("should open by clicking icon",function(){e(),expect(o.opened).to.be["true"]}),it("should open on function call",function(){o.open(),expect(o.opened).to.be["true"]}),it("should not close an open popup",function(){o.open(),o.open(),expect(o.opened).to.be["true"]}),it("should be hidden with null items",function(){o.items=null,o.open(),expect(o.opened),expect(o.$.overlay.hidden).to.be["true"]}),it("should be hidden with no items",function(){o.items=[],o.open(),expect(o.opened),expect(o.$.overlay.hidden).to.be["true"]}),it("should not leak combobox style scope to the overlay",function(){o.$.overlay.classList.contains("style-scope")&&o.$.overlay.classList.contains("vaadin-combo-box")&&(o.open(),expect(o.$.overlay.classList.contains("style-scope")).to.be["false"],expect(o.$.overlay.classList.contains("vaadin-combo-box")).to.be["false"])}),it("should not change combobox width",function(){o.style.display="inline-block",o.items=["foo"],o.value="foo";var e=o.clientWidth;o.open(),expect(o.clientWidth).to.equal(e)}),describe("after opening",function(){beforeEach(function(){o.open()}),touchDevice?(it("should not focus input on dropdown open",function(){var e=Polymer.dom(o.root).querySelector("input:focus");expect(e).to.be["null"]}),it("should not refocus the input field when closed from icon",function(){e();var n=Polymer.dom(o.root).querySelector("input:focus");expect(n).to.be["null"]})):safari||(it("should focus input on dropdown open",function(){var e=Polymer.dom(o.root).querySelector("input:focus");expect(e).to.equal(o.$.input)}),it("should refocus the input field when closed from icon",function(){e();var n=Polymer.dom(o.root).querySelector("input:focus");expect(n).to.eql(o.$.input)}))})}),describe("closing",function(){touchDevice?it("should close popup when tapping outside overlay",function(){o.open(),Polymer.Base.fire("tap",{},{bubbles:!0,node:document.body}),expect(o.opened).to.be["false"]}):it("should close popup when clicking outside overlay",function(){o.open(),document.body.click(),expect(o.opened).to.be["false"]}),it("should close on clicking icon",function(){o.open(),e(),expect(o.opened).to.be["false"]}),it("should close the overlay when focus is lost",function(){o.open(),o.$.input.fire("blur"),expect(o.opened).to.equal(!1)}),it("should add combobox style scope to the overlay",function(){o.$.overlay.classList.contains("style-scope")&&o.$.overlay.classList.contains("vaadin-combo-box")&&(o.open(),o.close(),expect(o.$.overlay.classList.contains("style-scope")).to.be["true"],expect(o.$.overlay.classList.contains("vaadin-combo-box")).to.be["true"])})}),describe("disabled",function(){beforeEach(function(){o.disabled=!0}),it("toggleIcon should be hidden when disabled",function(){expect(o.$.toggleIcon.hidden).to.be["true"]}),it("dropdown should not be shown when disabled",function(){o.$.input.fire("tap"),expect(o.opened).to.be["false"]})}),describe("read-only",function(){beforeEach(function(){o.readonly=!0}),it("toggleIcon should be hidden when read-only",function(){expect(o.$.toggleIcon.hidden).to.be["true"]}),it("dropdown should not be shown when read-only",function(){o.$.input.fire("tap"),expect(o.opened).to.be["false"]})})});</script></body></html>