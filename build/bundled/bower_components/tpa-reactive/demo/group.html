<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><script src="../../webcomponentsjs/webcomponents-lite.js"></script><script src="../../sinonjs/sinon.js"></script><link rel="import" href="../../polymer/polymer.html"><link rel="import" href="../../paper-button/paper-button.html"><link rel="import" href="../../tpa-reactive/tpa-reactive-group.html"><link rel="import" href="../../tpa-reactive/tpa-reactive-products.html"><link rel="import" href="../../tpa-reactive/tpa-reactive-transactions.html"></head><body><tpa-demo></tpa-demo><dom-module id="tpa-demo"><template><tpa-reactive-group><tpa-reactive-transactions id="reactiveTransactions"></tpa-reactive-transactions><tpa-reactive-products id="reactiveProducts"></tpa-reactive-products></tpa-reactive-group><section><tpa-reactive-products id="reactiveProducts1"></tpa-reactive-products><h1>Balance: <span id="balandeProducts"></span></h1></section><section><div><tpa-reactive-products id="reactiveProducts2"></tpa-reactive-products><pre id="showProducts"></pre><paper-button raised="" on-tap="refreshProducts">Refresh</paper-button></div><div><tpa-reactive-transactions id="reactiveTransactions1"></tpa-reactive-transactions><pre id="showTransactions"></pre><paper-button raised="" on-tap="refreshTransactions">Refresh</paper-button></div></section></template><script>var transactionsMock=[{transactionDateTime:"16-05-2016",transactionType:"BA",amount:10,counterAccount:"NL00INGB0000000000",isReservation:!1,currencyCode:"EUR",description:"Q-PARK LA VIE UTRECHT NLD"},{transactionDateTime:"16-05-2016",transactionType:"BA",amount:7,counterAccount:"NL11INGB0000000000",isReservation:!1,currencyCode:"EUR",description:"Een ijsje"}],productsMock=[{accountNumber:"NL22INGB0007657289",agreementType:"20",balanceBudget:1780.92,currency:"EUR",currencyDecimals:2,ean:"C0evDvtpK7cHzrBjiMIabm8PsveBwZMbSy7jHj9BPZo.",index:0,name:"Hr W F Veelenturf"},{accountNumber:"BE1234567890",agreementType:"99",balanceBudget:9,currency:"EUR",currencyDecimals:2,ean:"S0m3R4nD0m3aNnUmb3R.",index:1,name:"Hr Belg"}],server=sinon.fakeServer.create();server.respondWith("GET","/api/transactions",[200,{"Content-Type":"application/json"},JSON.stringify(transactionsMock)]),server.respondWith("GET","/api/products",[200,{"Content-Type":"application/json"},JSON.stringify(productsMock)]),server.respondWith("POST","/api/group",[200,{"Content-Type":"application/json"},JSON.stringify([transactionsMock,productsMock])]),Polymer({is:"tpa-demo",attached:function(){var e=this;document.getElementById("reactiveTransactions1").subscribe(function(n){e.$.showTransactions.innerHTML=JSON.stringify(n,null,4)}),document.getElementById("reactiveProducts2").subscribe(function(n){e.$.showProducts.innerHTML=JSON.stringify(n,null,4)}),document.getElementById("reactiveProducts1").subscribe(function(n){e.$.balandeProducts.innerHTML=n[0].balanceBudget}),server.respond()},refreshTransactions:function(){transactionsMock[0].amount=100*Math.random(),transactionsMock[1].amount=100*Math.random(),document.getElementById("reactiveTransactions").refresh(),server.respondWith("GET","/api/transactions",[200,{"Content-Type":"application/json"},JSON.stringify(transactionsMock)]),console.warn(server.requests),server.respond()},refreshProducts:function(){productsMock[0].balanceBudget=100*Math.random(),productsMock[1].balanceBudget=100*Math.random(),document.getElementById("reactiveProducts").refresh(),server.respondWith("GET","/api/products",[200,{"Content-Type":"application/json"},JSON.stringify(productsMock)]),console.warn(server.requests),server.respond()}});</script></dom-module></body></html>